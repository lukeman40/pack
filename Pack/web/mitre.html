<html>
<head>
<title></title>
<style type="text/css">
.style {
	color: #003;
	left: 100px;
	margin-left: 0px;
	padding-left: 200px;
}
#Height1 {
	color: #003;
	font-family: Tahoma, Geneva, sans-serif;
	float: right;
}
.Main {
	color: #000000;
}
body {
	background-color: #fffEFF;
}
.table_result {
	background-color: #D8E2FE;
	display: block;
	float: none;
	border-radius: 1px;
	box-shadow: 0px 0px 3px #000;
	position: static;
	border-top-width: 0px;
	border-right-width: 0px;
	border-bottom-width: 0px;
	border-left-width: 0px;
	margin: 1px;
	width: 400px;
}

.table_drawing {
	background-color: #D8E2FE;
	display: block;
	float: none;
	border-radius: 1px;
	box-shadow: 0px 0px 3px #000;
	position: static;
	border-top-width: 0px;
	border-right-width: 0px;
	border-bottom-width: 0px;
	border-left-width: 0px;
	margin: 1px;
}

.table_class {
	background-color: #D8E2FE;
	margin: 1px;
	padding: 0px;
	display: block;
	float: none;
	border-radius: 1px;
	box-shadow: 0px 0px 3px #000;
	left: 20px;
}

.table_class2 {
	box-shadow: 0 -1px grey;
	padding-top: 10px;
}
	
.pitch {
	margin: 1px;
	padding: 1px;
	border: 1px 1 #000;
}
.image {
	display: inline;
 	width: 100px;
  	height: 100px;
	float:left
}
input {
	width: 100%;
	background-color: rgba(255,255,255,0.5);
	border: none;
	color: #000;
	font-size: 1em;
	line-height: 0.5em;
	height: 2em;
	text-align: right;
}

.Main .table_class tr td h1 {
	text-align: center;
}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body class="Main">
<div id="Height1"><img src="Diagram.png" width="750" height="602"></div>

<div class="table_result">
 <table width="400" border="0" bgcolor="#CCDEFF" rules="none" class="table_class">
   <tr>
    <td colspan="2" align="left"><h1>Data Input</h1></td>
   </tr>
  <tr class="table_class2">
    <td width="242" align="left">Height: </td>
    <td width="168"><input id="height"></td>

  </tr>
  <tr class="table_class2">

    <td>Rafter Length Area 1:</td>
        <td> <input id="hypot1"></td>
  </tr>
  <tr class="table_class2">

    <td>Rafter Length Area 2:</td>
        <td> <input id="hypot2"></td>
  </tr>
  <tr class="table_class2">

    <td>Angle between canopies on plan: </td>
        <td><input id="angle_canopy"></td>
  </tr>
  <tr class="table_class2">
    <td>Box Sizes</td>
      <td>
        <select name="box_type" id="box_type">
          <option value="150x75">150x75</option>
          <option value="75x75">75x75</option>
        </select>
        </td>
  </tr>

  <tr class="table_class2">

    <td align="right"><button id="say">Submit</button></td>
    <td>

  </tr>
</table>
</div>

<br>
 <div class="table_result">
<table width="400" border="0" bgcolor="#CCDEFF" rules="none" class="table_class">
   <tr>
    <td colspan="2" align="left"><h1>Result</h1></td>
   </tr>
  <tr class="table_class2">
      <td>Pitch of Canopy 1</td>
      
    <td><input id='pitch1' readonly></td>

  </tr>
  <tr class="table_class2">
      <td width="242">Pitch of Canopy 2</td>
    <td width="168"><input id='pitch2' readonly></td>

  </tr>
  <tr class="table_class2">
      <td>Angle of Hip on Plan</td>
    <td><input id='hip_angle' readonly></td>

  </tr>
  <tr class="table_class2">
      <td>Pitch of Hip</td>
    <td><input id='hip_pitch' readonly></td>

  </tr>
  <tr class="table_class2">
  
      <td>Length of Hip</td>
    <td><input id='hip_length' readonly></td>

  </tr>
  <tr class="table_class2">
        <td><p><strong>Mitre 1</strong></p>
        <p>Cut angle for 75 face<br>Cut angle for 150 face</p></td>
        <td><input id='amitres1' readonly><br><input id='bmitres1' readonly></td>
    </tr>

    <tr class="table_class2">
      <td><p><strong>Saw Setting</strong></p>
        <p>Turn<br>Tilt</p></td></td>
    <td><input id='saw_setting1_turn' readonly><br><input id='saw_setting1_tilt' readonly></td>
    </tr>

  <tr class="table_class2">
            <td><p><strong>Mitre 2</strong></p>
            <p>Cut angle for 75 face<br>Cut angle for 150 face</p></td>
        <td><input id='amitres2' readonly><br><input id='bmitres2' readonly></td>
    </tr>

          <tr class="table_class2">
      <td><p><strong>Saw Setting</strong></p>
        <p>Turn<br>Tilt</p></td></td>
    <td><input id='saw_setting2_turn' readonly><br><input id='saw_setting2_tilt' readonly></td>
          </tr>

  <tr class="table_class2">
        <td>Sheet Angles</td>
    <td><div id="sheet_angles"></div></td>
  </tr>

  </tr>


  </tr>

</table>


</div>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br>

</p>
 <div class="table_drawing">

  <br>

<canvas id="myCanvas" width="1200" height="350">
Your browser does not support the HTML5 canvas tag.</canvas>
<br>
<svg height="500" width="500" id="svg1">
</svg>
<svg height="500" width="800" id="svg2">
</svg>




</div>




<script>

//0 = no dash, 1 = dash
var dash = 0;

function say_hi() {

    var height = document.getElementById('height').value;
    var hypot1 = document.getElementById('hypot1').value;
    var hypot2 = document.getElementById('hypot2').value;
    var angle_between_canopy = document.getElementById('angle_canopy').value;

    var box_type = document.getElementById("box_type").value;

 <!--Sets the box type defaults to values below-->
    var box_width = 75;
    var box_height = 150;

    if (box_type == "150x75"){
        box_width = 75;
        box_height = 150;
        }

     if (box_type == "75x75"){
        box_width = 75;
        box_height = 75;
        }

<!--GETS PITCH CANOPY 1 #soh-->
    var pitch1 = Math.asin(height/hypot1);

<!--GETS LENGTH CANOPY 1 #cah-->
    var adj1 = Math.cos(pitch1) * hypot1;

<!--GETS PITCH CANOPY 2 #soh -->
    var pitch2 = Math.asin(height/hypot2);

<!--GETS LENGTH CANOPY 2 #cah-->
    var adj2 = Math.cos(pitch2) * hypot2;

<!--HIP ANGLE IF NO ANGLE PROVIDED #toa-->
    var hip_angle = Math.atan(adj1/adj2);

<!--HIP ANGLE #toa-->
    var hip_angle = angle_between_canopy * (Math.PI / 180)/2;

<!--WITH HIP ANGLE & HEIGHT IT CAN GET THE LENGTH OF THE FLAT BIT UNDER HIP #soh-->
    var hyp_hip = adj1 / Math.sin(hip_angle);

<!--NOW THAT WE HAVE THE HEIGHT AND ADJANCENT WE CAN GET THE PITCH OF HIP-->
    var pitch_hip = Math.atan(height/hyp_hip);

	var html_canopy1_pitch =  Math.round(pitch1*(180 / Math.PI)) + String.fromCharCode(176);
	var html_canopy2_pitch = Math.round(pitch2*(180 / Math.PI)) + String.fromCharCode(176);
	var html_hip_angle = Math.round(hip_angle * (180 / Math.PI)) + String.fromCharCode(176);
	var html_hip_pitch = Math.round(pitch_hip * (180 / Math.PI)) + String.fromCharCode(176);
	var html_pitch_length = Math.round(Math.sqrt((hyp_hip * hyp_hip) + (height * height))) + "mm";

    document.getElementById('pitch1').value = html_canopy1_pitch;
    document.getElementById('pitch2').value = html_canopy2_pitch;
    document.getElementById('hip_angle').value = html_hip_angle;
    document.getElementById('hip_pitch').value = html_hip_pitch;
    document.getElementById('hip_length').value = html_pitch_length;

<!--Load Canvas and blank it-->
     var c = document.getElementById("myCanvas");
     var ctx = c.getContext("2d");
     ctx.fillStyle="#FFFFFF";
     ctx.fillRect(0,0,myCanvas.width,myCanvas.height);


function mitre(pitch,number, camera_x) {

<!--MITRES1-->
<!--width face #cah-->
    var angle_width_face = Math.cos(pitch)*box_width;

<!--width face #toa-->
    var angle_width_face = angle_width_face/Math.tan((angle_between_canopy * (Math.PI / 180))/2);

<!--#toa-->
    var cut_angle_width = Math.atan(box_width/angle_width_face);

<!--length face #soh-->
    var angle_height_face = Math.sin(pitch)*box_height;

 <!--length face #toa-->
    var angle_height_face = angle_height_face/Math.tan((angle_between_canopy* (Math.PI / 180))/2);

<!--#toa-->
    var cut_angle_height = Math.atan(box_height/angle_height_face);

    var html_width_face = (cut_angle_width * (180 / Math.PI)).toFixed(2);
    var html_height_face = (cut_angle_height * (180 / Math.PI)).toFixed(2);

    document.getElementById('amitres' + number).value = html_width_face + String.fromCharCode(176);
    document.getElementById('bmitres' + number).value = html_height_face + String.fromCharCode(176);

<!--drawing-->

<!--Mitre 1 Drawing width Face-->
    ctx.beginPath();
    ctx.moveTo(0+camera_x,20);
    ctx.lineTo(0+camera_x,20+box_width);
    ctx.lineTo(250+camera_x,20+box_width);
    ctx.lineTo(250-angle_width_face+camera_x,20);
    ctx.lineTo(0+camera_x,20);
    ctx.stroke();
    ctx.fillStyle="white";
    ctx.fill();

	<!--document.getElementById('svg3').points = 0+camera_x,20 ,0+camera_x ,95 ,250+camera_x,95 ,250-angle_width_face+camera_x ,20;-->

	var svg1 = '<polygon points=\" ' + (0+camera_x) + ',' + 20 + ' ' + (0+camera_x) + ',' + 95 + ' ' + (250+camera_x) + ',' + 95 + ' ' + (250-angle_width_face+camera_x) + ',' + 20 + ' \" style=\"fill:lime;stroke:purple;stroke-width:1\" />';

    document.getElementById('svg' + number).innerHTML = svg1;

    <!--Sets dashed line->

    ctx.beginPath();

    if (dash > 0){
    ctx.setLineDash([5, 3]);
    }

    ctx.moveTo(250-angle_height_face+camera_x,20+box_width);
    ctx.lineTo((250-angle_height_face)+(camera_x-angle_width_face) ,20);
    ctx.stroke();

 <!--Mitre 1 Drawing Arc-->

 <!--Works out the equation of the angle y = mx+b -->
     var m = (-box_width)/(-angle_width_face)
     var b = (95+camera_x)-(m*250+camera_x)

 <!--Draws the arc from the above equation -->
     ctx.beginPath();
     ctx.setLineDash([]);
     ctx.moveTo(220+camera_x,20+box_width);
     ctx.arcTo(210+camera_x,box_width,230+camera_x,m*230+b,20);
     ctx.lineTo(230+camera_x,m*230+b);
     ctx.stroke();

<!--Mitre Drawing height Face-->
    ctx.beginPath();
    ctx.moveTo(0+camera_x,100);
    ctx.lineTo(0+camera_x,100+box_height);
    ctx.lineTo(250+camera_x,100+box_height);
    ctx.lineTo(250+camera_x-angle_height_face,100);
    ctx.lineTo(0+camera_x,100);
    ctx.stroke();
    ctx.fillStyle="white";
    ctx.fill();

<!--Sets dashed line->

    ctx.beginPath();

    if (dash > 0){
    ctx.setLineDash([5, 3]);
    }

    dash = dash + 1;

    ctx.moveTo(250-angle_width_face+camera_x,100+box_height);
    ctx.lineTo((250-angle_width_face)+(camera_x-angle_height_face) ,100);
    ctx.stroke();

 <!--Mitre Drawing Arc-->

 <!--Works out the equation of the angle y = mx+b -->
     m = (box_height)/(angle_height_face)
     b = (100+box_height+camera_x)-(m*(100+box_height)+camera_x)

 <!--Draws the arc from the above equation -->
     ctx.beginPath();
     ctx.setLineDash([]);
     ctx.moveTo(200+camera_x,100+box_height);
     ctx.arcTo(190+camera_x,220,(((100+box_height-25)-b)/m)+camera_x,100+box_height-10,20);
     ctx.lineTo((((100+box_height-25)-b)/m)+camera_x,100+box_height-10);
     ctx.stroke();

    var angle_in_deg = Math.round((cut_angle_width * (180 / Math.PI))*100)/100;

<!--adds the text -->

<!--font -->

    ctx.fillStyle = 'black';

    ctx.font="20px Arial";

 <!--Title -->
    ctx.fillText("Mitre "+ number,0+camera_x,15);

<!--angles -->
    ctx.fillText(Math.round((cut_angle_width * (180 / Math.PI))*100)/100,250+camera_x,85);

    ctx.fillText(Math.round((cut_angle_height * (180 / Math.PI))*100)/100,250+camera_x,95+box_height);

    ctx.fillText("Hip/Valley on Plan",830, 40);
    ctx.fillText(angle_between_canopy,870, 70);

 <!--face -->
    ctx.fillText(box_width + " Face",20+camera_x,65);
    ctx.fillText(box_height + " Face",20+camera_x,180);

 <!--Plan -->

     if (angle_between_canopy < 90){

        var angle11 = getTanDeg(90-angle_between_canopy)*100 *-1;
        }else{
        var angle11 = getTanDeg(angle_between_canopy-90)*100;
        }

      ctx.beginPath();
      ctx.moveTo(800,50);
      ctx.lineTo(900,50);
      ctx.lineTo(900+angle11,150);
      ctx.stroke();

  <!--Saw Settings -->

    var turn = Math.tan(html_width_face * (Math.PI /180));
    var turn1 = 75/turn;
    var turn2 = turn1*Math.sin(html_height_face * (Math.PI /180));
    var turn3 = turn2/75;
    var turn4 = Math.atan(turn3)*(180 / Math.PI);

    var tilt = 90-(cut_angle_height * (180 / Math.PI)*100/100);

    document.getElementById('saw_setting'+number+'_turn').value = Math.round(turn4,2) + String.fromCharCode(176);
    document.getElementById('saw_setting'+number+'_tilt').value = Math.round(tilt,0) + String.fromCharCode(176);

}


 function getTanDeg(deg) {
      var rad = deg * Math.PI/180;
      return Math.tan(rad);
}

 <!--Executes Functions -->
mitre(pitch1, 1, 0);
mitre(pitch2, 2, 400);



   <!--Sheet Sizes-->

    var panel_angle1 = cut_angle_width;
    var panel_angle2 = cut_angle_width;

    var html4 = '<br> Sheet Angle for Canopy 1 - ' + panel_angle1 * (180 / Math.PI) + '<br> Sheet Angle for Canopy 2 - ' +  panel_angle2 * (180 / Math.PI);
    document.getElementById('sheet_angles').innerHTML = html4;

}

    document.getElementById('say').addEventListener('click', say_hi);

</script>
 
</body>
</html>
