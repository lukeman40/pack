<html>
<head>
<title></title>
<style type="text/css">
.style {
	color: #003;
	left: 100px;
	margin-left: 0px;
	padding-left: 200px;
}
#Height1 {
	color: #003;
	font-family: Tahoma, Geneva, sans-serif;
}
.Main {
	color: #000000;
}
body {
	background-color: #fffEFF;
}
.table_result {
	background-color: #D8E2FE;
	margin: 1px;
	padding: 1px;
	width: auto;
	float: left;
}
.table_class {
	border: 1px solid #000;
}
.pitch {
	margin: 1px;
	padding: 1px;
	border: 1px 1 #000;
}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body class="Main">
 <p></p>
 <table width="500" border="0" align="center" bgcolor="#CCDEFF" rules="none" class="table_class">
  <tr>
    <td><div id="Height1">Height: </td>
    <td><input id="height"></div></td>
  </tr>
  <tr>

    <td><div id="Height1">Rafter Length Area 1:</td>
    
        <td> <input id="hypot1"></div></td>
  </tr>
  <tr>

    <td><div id="Height1">Rafter Length Area 2:</td>
        <td> <input id="hypot2"></div></td>
  </tr>
  <tr>

    <td><div id="Height1">Angle between canopies on plan: </td>
        <td><input id="angle_canopy"></div></td>
  </tr>
       <tr>

    <td align="right"><button id="say">Submit</button></td>

  </tr>
</table>
<hr>
<div class="table_result">
  <div class=pitch id="pitch1"></div><div id="pitch2"></div><div id="hip_angle"></div><div id="hip_pitch"></div><div id="hip_length"></div>
<div id="mitres1"></div>
<div id="mitres2"></div>
<div id="sheet_angles"></div>

<canvas id="myCanvas" width="1920" height="350" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<svg height="500" width="500" id="svg1">
</svg>
<svg height="500" width="800" id="svg2">
</svg>

</div>



<img src="Diagram.png" align="right">
 
<script>

//0 = no dash, 1 = dash
var dash = 0;

function say_hi() {
    var height = document.getElementById('height').value;
    var hypot1 = document.getElementById('hypot1').value;
    var hypot2 = document.getElementById('hypot2').value;
    var angle_between_canopy = document.getElementById('angle_canopy').value;

<!--GETS PITCH CANOPY 1 #soh-->
    var pitch1 = Math.asin(height/hypot1);

<!--GETS LENGTH CANOPY 1 #cah-->
    var adj1 = Math.cos(pitch1) * hypot1;

<!--GETS PITCH CANOPY 2 #soh -->
    var pitch2 = Math.asin(height/hypot2);

<!--GETS LENGTH CANOPY 2 #cah-->
    var adj2 = Math.cos(pitch2) * hypot2;

<!--HIP ANGLE IF NO ANGLE PROVIDED #toa-->
    var hip_angle = Math.atan(adj1/adj2);

<!--HIP ANGLE #toa-->
    var hip_angle = angle_between_canopy * (Math.PI / 180)/2;

<!--WITH HIP ANGLE & HEIGHT IT CAN GET THE LENGTH OF THE FLAT BIT UNDER HIP #soh-->
    var hyp_hip = adj1 / Math.sin(hip_angle);

<!--NOW THAT WE HAVE THE HEIGHT AND ADJANCENT WE CAN GET THE PITCH OF HIP-->
    var pitch_hip = Math.atan(height/hyp_hip);

	var html1 = 'Pitch of Canopy 1 = ' + Math.round(pitch1*(180 / Math.PI));
	var html2 = '| Pitch of Canopy 2 = ' + Math.round(pitch2*(180 / Math.PI));
	var html3 = '| Angle of hip on plan = ' + Math.round(hip_angle * (180 / Math.PI));
	var html4 = '| Pitch of the Hip =' + Math.round(pitch_hip * (180 / Math.PI))
	var html5 = '| Length of Hip =' + Math.round(Math.sqrt((hyp_hip * hyp_hip) + (height * height)));

    document.getElementById('pitch1').innerHTML = html1;
    document.getElementById('pitch2').innerHTML = html2;
    document.getElementById('hip_angle').innerHTML = html3;
    document.getElementById('hip_pitch').innerHTML = html4;
    document.getElementById('hip_length').innerHTML = html5;	

     var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");

function mitre(pitch,number, camera_x) {

<!--MITRES1-->
<!--75 face #cah-->
    var angle_75_face = Math.cos(pitch)*75;

<!--75 face #toa-->
    var angle_75_face = angle_75_face/Math.tan((angle_between_canopy * (Math.PI / 180))/2);

<!--#toa-->
    var cut_angle_75 = Math.atan(75/angle_75_face);

<!--150 face #soh-->
    var angle_150_face = Math.sin(pitch)*150;

 <!--150 face #toa-->
    var angle_150_face = angle_150_face/Math.tan((angle_between_canopy* (Math.PI / 180))/2);

<!--#toa-->
    var cut_angle_150 = Math.atan(150/angle_150_face);

    var html2 = '| <u>Mitre ' + number + '</u>Cut Angle for 75 face ' + +(cut_angle_75 * (180 / Math.PI)).toFixed(2) + ' | <u>Mitre ' + number + '</u>Cut Angle for 150 Side ' + +(cut_angle_150 * (180 / Math.PI)).toFixed(2);



    document.getElementById('mitres' + number).innerHTML = html2;

<!--drawing-->





<!--Mitre 1 Drawing 75 Face-->
    ctx.beginPath();
    ctx.moveTo(0+camera_x,20);
    ctx.lineTo(0+camera_x,95);
    ctx.lineTo(250+camera_x,95);
    ctx.lineTo(250-angle_75_face+camera_x,20);
    ctx.lineTo(0+camera_x,20);
    ctx.stroke();
    ctx.fillStyle="white";
    ctx.fill();
		
	var svg1 = '<polygon points=\" ' + (0+camera_x) + ',' + 20 + ' ' + (0+camera_x) + ',' + 95 + ' ' + (250+camera_x) + ',' + 95 + ' ' + (250-angle_75_face+camera_x) + ',' + 20 + ' \" style=\"fill:lime;stroke:purple;stroke-width:1\" />';
	
    document.getElementById('svg' + number).innerHTML = svg1;

    <!--Sets dashed line->

    ctx.beginPath();

    if (dash > 0){
    ctx.setLineDash([5, 3]);
    }

    ctx.moveTo(250-angle_150_face+camera_x,95);
    ctx.lineTo((250-angle_150_face)+(camera_x-angle_75_face) ,20);
    ctx.stroke();

 <!--Mitre 1 Drawing Arc-->

 <!--Works out the equation of the angle y = mx+b -->
     var m = (-75)/(-angle_75_face)
     var b = (95+camera_x)-(m*250+camera_x)

 <!--Draws the arc from the above equation -->
     ctx.beginPath();
     ctx.setLineDash([]);
     ctx.moveTo(220+camera_x,95);
     ctx.arcTo(210+camera_x,75,230+camera_x,m*230+b,20);
     ctx.lineTo(230+camera_x,m*230+b);
     ctx.stroke();

    ctx.font="20px Georgia";


    <!--if less than zero, add 90-->




<!--Mitre Drawing 150 Face-->
    ctx.beginPath();
    ctx.moveTo(0+camera_x,100);
    ctx.lineTo(0+camera_x,250);
    ctx.lineTo(250+camera_x,250);
    ctx.lineTo(250+camera_x-angle_150_face,100);
    ctx.lineTo(0+camera_x,100);
    ctx.stroke();
    ctx.fillStyle="white";
    ctx.fill();

<!--Sets dashed line->

    ctx.beginPath();

    if (dash > 0){
    ctx.setLineDash([5, 3]);
    }

    dash = dash + 1;

    ctx.moveTo(250-angle_75_face+camera_x,250);
    ctx.lineTo((250-angle_75_face)+(camera_x-angle_150_face) ,100);
    ctx.stroke();

 <!--Mitre Drawing Arc-->

 <!--Works out the equation of the angle y = mx+b -->
     m = (-150)/(-angle_150_face)
     b = (250+camera_x)-(m*250+camera_x)

 <!--Draws the arc from the above equation -->
     ctx.beginPath();
     ctx.setLineDash([]);
     ctx.moveTo(200+camera_x,250);
     ctx.arcTo(190+camera_x,220,230+camera_x,m*230+b,20);
     ctx.lineTo(230+camera_x,m*230+b);
     ctx.stroke();

    ctx.font="20px Georgia";
    ctx.strokeText("Mitre "+ number,0+camera_x,15);


    ctx.font="20px Georgia";

    var angle_in_deg = Math.round((cut_angle_75 * (180 / Math.PI))*100)/100;




<!--adds the text  if less than zero, add 90-->
    if (angle_in_deg < 0){

            ctx.strokeText((Math.round((cut_angle_75 * (180 / Math.PI))*100)/100)+90,250+camera_x,85);

            }else{

            ctx.strokeText(Math.round((cut_angle_75 * (180 / Math.PI))*100)/100,250+camera_x,85);
            }

    var angle_in_deg = Math.round((cut_angle_150 * (180 / Math.PI))*100)/100;
    if (angle_in_deg < 0){

            ctx.strokeText((Math.round((cut_angle_150 * (180 / Math.PI))*100)/100)+90,250+camera_x,240);

            }else{

            ctx.strokeText(Math.round((cut_angle_150 * (180 / Math.PI))*100)/100,250+camera_x,240);
            }

}

mitre(pitch1, 1, 0);
mitre(pitch2, 2, 400);

   <!--Sheet Sizes-->

    var panel_angle1 = cut_angle_75;
    var panel_angle2 = cut_angle_75;

    var html4 = '<br> Sheet Angle for Canopy 1 - ' + panel_angle1 * (180 / Math.PI) + '<br> Sheet Angle for Canopy 2 - ' +  panel_angle2 * (180 / Math.PI);
    document.getElementById('sheet_angles').innerHTML = html4;

}

    document.getElementById('say').addEventListener('click', say_hi);

</script>
 
</body>
</html>